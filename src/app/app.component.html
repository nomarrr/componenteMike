<div class="demo-container">
  <h1>Componente de Autocompletado Inteligente</h1>
  <p class="subtitle">Componente reutilizable que funciona con diferentes tipos de datos</p>
  
  <div class="demo-section">
    <div class="selector-container">
      <label for="tipo-busqueda" class="selector-label">
        <span class="label-icon">{{ getTipoIcono() }}</span>
        <span class="label-text">Tipo de bÃºsqueda:</span>
      </label>
      <select
        id="tipo-busqueda"
        [(ngModel)]="tipoBusqueda"
        (ngModelChange)="onTipoCambio()"
        class="tipo-selector"
      >
        @for (tipo of tiposDisponibles; track tipo) {
          <option [value]="tipo">
            @switch (tipo) {
              @case ('usuarios') { ğŸ‘¤ Usuarios }
              @case ('libros') { ğŸ“š Libros }
              @case ('productos') { ğŸ›ï¸ Productos }
              @case ('peliculas') { ğŸ¬ PelÃ­culas }
            }
          </option>
        }
      </select>
    </div>

    <div class="info-box">
      <p class="info-text">
        <strong>Tipo actual:</strong> {{ getTipoIcono() }} {{ getTipoNombre() }} 
        @if (tipoBusqueda === 'peliculas') {
          <span class="api-badge">(Fuente externa - API simulada)</span>
        } @else {
          <span class="local-badge">(Fuente local - Array)</span>
        }
      </p>
    </div>

    <div class="buscador-wrapper">
      <app-buscador
        [dataSource]="getDataSource()"
        [placeholder]="getPlaceholder()"
        [minChars]="tipoBusqueda === 'peliculas' ? 3 : 2"
        [cacheResults]="true"
        (onSelect)="onItemSelected($event)"
        (onSearch)="onSearchPerformed($event)"
      ></app-buscador>
    </div>

    @if (ultimoSeleccionado) {
      <div class="result-info">
        <span class="result-icon">âœ…</span>
        <div class="result-content">
          <strong>Ãšltimo seleccionado:</strong>
          <span class="result-value">ID: {{ ultimoSeleccionado }}</span>
          <span class="result-type">({{ getTipoNombre() }})</span>
        </div>
      </div>
    }

    <div class="demo-features">
      <h3>ğŸ”§ CaracterÃ­sticas demostradas:</h3>
      <ul class="features-list">
        <li>âœ… <strong>Reutilizable:</strong> El mismo componente funciona con diferentes tipos de datos</li>
        <li>âœ… <strong>Flexible:</strong> Acepta arrays locales o funciones Observable (APIs externas)</li>
        <li>âœ… <strong>Configurable:</strong> Placeholder, minChars y cacheResults personalizables</li>
        <li>âœ… <strong>Responsivo:</strong> Debouncing de 300ms y validaciÃ³n de caracteres mÃ­nimos</li>
        <li>âœ… <strong>Persistente:</strong> Guarda selecciones recientes en localStorage</li>
      </ul>
    </div>
  </div>
</div>

<router-outlet />
